<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>step02_example.html</title>
	<style>
		canvas{
			border: 1px solid red;
		}
	</style>
</head>
<body>
	<canvas id="myCanvas" width="800" height="500"></canvas>
	<script src="js/jquery-3.3.1.js"></script>
	<script>
		var canvas=document.querySelector("#myCanvas");
		var context=canvas.getContext("2d");
		// 배경 이미지 로딩하기
		var backImg=new Image();
		backImg.src="images/background.jpg";
		// 토끼 이미지 두개 로딩해서 배열에 담기
		var rabbit1=new Image();
		var rabbit2=new Image();
		rabbit1.src="images/rabbit_1.png";
		rabbit2.src="images/rabbit2.png";
		var rabbitImgs=[rabbit1, rabbit2];
		// 토끼의 좌표
		var rabbitX=400, rabbitY=250;
		// 토끼 이미지 인덱스
		var rabbitIndex=0;
		// 카운트를 셀 변수
		var count=0;
		// 스나이프 이미지 로딩하기
		var snipeImg=new Image();
		snipeImg.src="images/snipe.png";
		// 스나이프의 좌표
		var snipeX=0, snipeY=0;

		setInterval(function(){
			// 배경이미지 그리기
			context.drawImage(backImg, 0,0, 800, 500);
			// 토끼 이미지 그리기
			context.drawImage(rabbitImgs[rabbitIndex], rabbitX-50, rabbitY-50, 100, 100);
			// 스나이프 이미지 그리기
			context.drawImage(snipeImg,snipeX-50 ,snipeY-50 , 100, 100);

			// 카운트를 1 증가 시킨다.
			count++;
			// 토끼 애니메이션
			rabbitAni();

			
		}, 10);

		function rabbitAni(){
			if(count%20==0){ // 20배수마다 나머지가 0이됨
				rabbitIndex++;   // 20번에 한번씩만 이미지 교체하겠다.
				if(rabbitIndex==2){
					rabbitIndex=0;
				}
			}
		};

		


		$("#myCanvas").on("mousemove", function(e){
			
			snipeX=e.offsetX;
			snipeY=e.offsetY;
		});
	</script>
</body>
</html>